<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simon Game</title>
    <!-- <link rel="stylesheet" href="simon_says.css"> -->
    <style>
        body{
            text-align: center;
        }
        .btn{
            height: 150px;
            width: 150px;
            border-radius:20px;
            border: 5px solid black;
            margin: 2.5rem;
        }
        .btn-container{
            display: flex;
            justify-content: center;
        }
        .yellow{
            background-color:yellow;
        }
        .red{
            background-color:red;
        }
        .purple{
            background-color: purple;
        }
        .blue{
            background-color: blue;
        }
        .flash{
            background-color:white;
        }
        .userflash{
            background-color:green;
        }
    </style>
</head>
<body>
    <h1>Simon says Game</h1>
    <h3>Press any key to start the game</h3>
    <div class="btn-container">
        <div class="line1">
            <div class="btn yellow" type="button" id="yellow">1</div>
            <div class="btn red" type="button" id="red">2</div>
        </div>
        <div class="line2">
            <div class="btn purple" type="button" id="purple">3</div>
            <div class="btn blue" type="button" id="blue">4</div>
        </div>
    </div>
    <script>
        // let gameSeq =[];
// let userSeq = [];


// let btns = ["yellow", "purple", "red", "blue"];

// let started = false;
// let level = 0;

// let h3 = document.querySelector("h3");


// document.addEventListener("keypress", function(){
//     if(started==false){
//         console.log("game is started");
//         started = true;
//         levelUp();
//     }
// });

// function gameFlash(btn){
//     btn.classList.add("flash");
//     setTimeout(function(){
//         btn.classList.remove("flash");
//     },250);
// }

// function userFlash(btn){
//     btn.classList.add("userflash");
//     setTimeout(function(){
//         btn.classList.remove("userflash");
//     },250);
// }

// function levelUp(){
//     userSeq = [];
//     level++;
//     h3.innerText = `Level ${level}`;

//     let randIdx = Math.floor(Math.random()*4);
//     let randColor = btns[randIdx];
//     let randBtn = document.querySelector(`.${randColor}`);
//     // console.log(randIdx);
//     // console.log(randColor);
//     // console.log(randBtn);
//     gameSeq.push(randColor);
//     console.log(gameSeq);


//     gameFlash(randBtn);
// }


// function checkAns(idx){
//     console.log("curr level :", level);
//     // let idx = level-1;
//     if(userSeq[idx]=== gameSeq[idx]){
//         // console.log("same value");
//         if(userSeq.length == gameSeq.length){
//            setTimeout(levelUp,1000);
//         }
//     }
//     else{
//         h3.innerHTML = `Game over! <b>your score was ${level} <b> <br>Press any key to start`;
//         document.querySelector("body").style.backgroundColor= "red";
//         setTimeout(function(){
//             document.querySelector("body").style.backgroundColor= "white";
//         },150)
//         reset();
//     }
// }



// function btnPress(){
//     console.log(this);
//     let btn = this;
//     userFlash(btn);

//     userColor = btn.getAttribute("id");
//     // console.log(userColor);
//     userSeq.push(userColor);

//     checkAns(userSeq.length-1);

// }

// let allBtns = document.querySelectorAll(".btn");
// for(btn of allBtns){
//     btn.addEventListener("click", btnPress);
// }


// function reset(){
//     started = false;
//     gameSeq =[];
//     userSeq =[];
//     level = 0;
// }



let userSeq = [];
let gameSeq = [];

let btns = ["yellow","purple","red","blue"];

let started = false;
let level = 0;

let h3 = document.querySelector("h3");

document.addEventListener("keypress", function(){
    if(started == false){
        console.log("game start");

        started = true;
        levelUp();
    }
});


function gameFlash(btn){
    btn.classList.add("flash");
    setTimeout(function(){
        btn.classList.remove("flash");
    },250);
}

function userFalsh(btn){
    btn.classList.add("userflash");
    setTimeout(function(){
        btn.classList.remove("userflash");
    },250);
}


function levelUp(){
    userSeq = [];
    level++;

    h3.innerText = `level ${level}`;

    let randIdx = Math.floor(Math.random()*4);
    let randColor = btns[randIdx];
    let randBtn = document.querySelector(`.${randColor}`);
    gameSeq.push(randColor);

    gameFlash(randBtn);

}

function checkAns(idx){
    console.log("curr level :", level);
    if(userSeq[idx]=== gameSeq[idx]){
        if(userSeq.length== gameSeq.length){
            setTimeout(levelUp,1000);

        }

    }
    else{
        h3.innerHTML = `Game over! <b> your score was ${level}<b> <br>press any key to start game`;
        document.querySelector("body").style.backgroundColor = "red";
        setTimeout(function(){
            document.querySelector("body").style.backgroundColor = "white";
        },150);

        reset();
    }
}

function btnPress(){
    console.log(this);
    let btn = this;
    userFalsh(btn);

    userColor = btn.getAttribute("id");
    userSeq.push(userColor);

    checkAns(userSeq.length-1);
}

let allBtns = document.querySelectorAll(".btn");
for(btn of allBtns){
    btn.addEventListener("click", btnPress);
}


function reset(){
    started = false;
    userSeq = [];
    gameSeq = [];
    level = 0;

}
    </script>
    <!-- <script src="simon_say.js"></script> -->
</body>
</html>